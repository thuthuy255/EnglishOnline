@{
    ViewBag.Title = "Trang Cá Nhân";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string username = ViewBag.Username ?? "Thủy";
    string email = ViewBag.Email ?? "email@example.com";
}

<div class="container mt-4">
    <!-- Header image with edit icon -->
    <div class="position-relative rounded overflow-hidden bg-light">
        <img id="headerImage" src="https://storage.googleapis.com/a1aa/image/d2d7f0c5-9ddc-4415-3395-006abd767c05.jpg" class="w-100" alt="Ảnh nền" style="height: 200px; object-fit: contain;">
        <button class="btn btn-light position-absolute top-0 end-0 m-3 border" onclick="document.getElementById('imageInput').click()">
            <i class="fas fa-pencil-alt text-muted"></i>
        </button>
        <input type="file" id="imageInput" accept="image/*" style="display: none;">
    </div>

    <!-- User Info -->
    <div class="mt-3">
        <h4 class="fw-semibold">@username</h4>
        <p class="text-muted small fw-semibold">@email</p>
        <p class="text-secondary small fw-semibold">Đã tham gia Tháng Ba 2025</p>

        <div class="d-flex align-items-center gap-3 text-primary fw-semibold small">
            <span>Đang theo dõi 0</span>
            <span>0 Người theo dõi</span>
            <img src="https://storage.googleapis.com/a1aa/image/eac268cb-010e-40ca-1297-eb5d460ddcd1.jpg" alt="Flag" width="20" height="14">
        </div>
    </div>

    <hr class="my-4" />

    <!-- Thống kê -->
    <h5 class="fw-semibold mb-3">Thống kê</h5>
    <div class="row g-3">
        <div class="col-6">
            <div class="border rounded p-3 text-muted small fw-semibold text-center">
                <div class="mb-1">
                    <i class="fas fa-fire me-1"></i> 0
                </div>
                <div class="text-muted fst-italic" style="font-size: 10px;">Ngày streak</div>
            </div>
        </div>
        <div class="col-6">
            <div class="border rounded p-3 text-warning small fw-semibold text-center">
                <div class="mb-1">
                    <i class="fas fa-bolt me-1"></i> 13
                </div>
                <div class="text-muted fst-italic" style="font-size: 10px;">Tổng điểm KN</div>
            </div>
        </div>
        <div class="col-6">
            <div class="border rounded p-3 text-muted small fw-semibold text-center">
                <div class="mb-1">
                    <i class="fas fa-shield-alt me-1"></i> Chưa có xếp hạng
                </div>
                <div class="text-muted fst-italic" style="font-size: 10px;">Giải đấu hiện tại</div>
            </div>
        </div>
        <div class="col-6">
            <div class="border rounded p-3 text-muted small fw-semibold text-center">
                <div class="mb-1">
                    <i class="fas fa-award me-1"></i> 0
                </div>
                <div class="text-muted fst-italic" style="font-size: 10px;">Số lần đạt top 3</div>
            </div>
        </div>
    </div>

    <!-- Thành tích -->
    <div class="mt-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-semibold">Thành tích</h5>
            <a href="#" class="text-primary small fw-semibold text-decoration-underline">XEM TẤT CẢ</a>
        </div>

        <!-- Badge 1 -->
        <div class="d-flex align-items-start gap-3 mb-4">
            <div class="rounded d-flex flex-column justify-content-center align-items-center text-white bg-danger text-center" style="width: 56px; height: 56px;">
                <i class="fas fa-fire fs-4 mb-1"></i>
                <div class="small">CẤP 1</div>
            </div>
            <div class="flex-grow-1">
                <div class="d-flex justify-content-between small fw-semibold text-dark">
                    <span>Lửa rừng</span>
                    <span class="text-muted">1/3</span>
                </div>
                <div class="text-muted small mt-1">
                    Đạt chuỗi 3 ngày streak
                </div>
                <div class="progress mt-2" style="height: 6px;">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 33.33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <!-- Badge 2 -->
        <div class="d-flex align-items-start gap-3">
            <div class="rounded d-flex flex-column justify-content-center align-items-center text-white bg-success text-center" style="width: 56px; height: 56px;">
                <i class="fas fa-hat-wizard fs-4 mb-1"></i>
            </div>
            <div class="flex-grow-1">
                <div class="d-flex justify-content-between small fw-semibold text-dark">
                    <span>Cao nhân</span>
                    <span class="text-muted">13/100</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('imageInput').addEventListener('change', function (event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                document.getElementById('headerImage').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
</script>